<style>    .banner:hover{        border:2px solid #555;    }</style><link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" /><script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script><?phpif($_POST['submit_banner']){    if($_REQUEST["select_action_banner"] && $_REQUEST["src_val"]){        $title    = $_REQUEST["title"];        $type = $_REQUEST["select_action_banner"];        $showtype = 1;        $pic = $_REQUEST["src_val"];        $value = "";        if($type == 1) {            $value = $_REQUEST["product"];        }        elseif($type == 2){            $value = $_REQUEST["cat"];            if($_POST['sub_category'] == 'on'){                $type = 7;                $x = get_term_by('slug', $value, 'product_cat');                if($x){                    $value = $x->term_id;                }            }        }        elseif ($type == 3) {            $value = $_REQUEST["link"];        }        elseif ($type == 4) {            $value = $_REQUEST["post"];        }        elseif ($type == 5) {            $value = $_REQUEST["post_cat"];        }        //value = $_REQUEST["value"];        global $wpdb;        $table_name = $wpdb->prefix . "woo2app_mainpage";        $res = $wpdb->get_results("select MAX(mp_order) AS max_order from $table_name");        if(!is_null($res[0]->max_order)){            foreach ($res as $key) {                $max = $key->max_order + 1;            }        }else{            $max = 1;        }        $r = $wpdb->query( $wpdb->prepare("INSERT INTO $table_name 		( mp_title , mp_type , mp_value , mp_showtype , mp_pic , mp_order ,mp_sort) 		VALUES ( %s, %d, %s, %d, %s, %d, %s )", $title,$type,$value,$showtype,$pic,$max, $sort) );        if($r){            echo "<p style='color:green'>". "بنر ذخیره شد .از قسمت مرتب سازی مرتب کنید." .'</p>';        }    }    else{        echo "<p style='color:red'>". ' * مشکلی رخ داده است ، لطفا فیلد ها را به طور صحیح پر کنید.' .'</p>';    }}$args = array(    'hide_empty' => 0 ,    'taxonomy' => 'product_cat');$cats = get_categories($args);$args = array(    'hide_empty' => 0 ,    'taxonomy' => 'category');$post_cats = get_categories($args);?><form action="" method="post">    <table class="form-table " style="direction: rtl">        <tbody>        <tr valign="top" class="">            <th scope="row" class="titledesc">                <label > عنوان </label>            </th>            <td class="forminp">                <input type="text"  name="title" id="title" value="" placeholder="عنوان">            </td>        </tr>        <tr valign="top" class="">            <th scope="row" class="titledesc">                <label > اکشن *  </label>            </th>            <td class="forminp">                <select class="form-control" id="select_action_banner" name="select_action_banner" required="required">                    <option value="0"> لطفا یکی از موارد زیر را انتخاب کنید</option>                    <option value="1" >محصول</option>                    <option value="2"> دسته بندی محصولات </option>                    <option value="3">لینک</option>                    <option value="4"> انتخاب پست </option>                    <option value="5">  دسته بندی پست ها </option>                    <option value="6"> بدون اکشن </option>                </select>            </td>        </tr>        <tr valign="top" class="el_type" id="el_products" style="display: none">            <th scope="row" class="titledesc">                <label > محصول </label>            </th>            <td class="forminp">                <input id="search_product_banner1" placeholder="نام محصول را جستجو کنید ...." type="text">                <select name="product" id="value_post_items_menu1" style="width:200px" class="form-control"></select>                <img style="display:none;" height="25" width="25" id="img_load" src="<?php echo WP_PLUGIN_URL."/".dirname( plugin_basename( __FILE__ ) ).'/../files/img/load.gif' ?>">            </td>        </tr>        <tr valign="top" class="el_type" id="el_cats" style="display: none">            <th scope="row" class="titledesc">                <label > دسته بندی محصولات </label>            </th>            <td class="forminp">                <select class="form-control" name="cat" id="cat">                    <?php                    foreach ($cats as $cat) {                        ?>                        <option style="text-align:right;" value="<?= $cat->slug; ?>"><?= $cat->name; ?></option>                        <?php                    }                    ?>                </select>                <input type="checkbox" name="sub_category"/> باز کردن زیر دسته های این دسته در اپلیکیشن            </td>        </tr>        <tr valign="top" class="el_type" id="el_link" style="display: none">            <th scope="row" class="titledesc">                <label > لینک کامل با http  * </label>            </th>            <td class="forminp">                <input type="text"  name="link" id="link" value="" placeholder="لینک">                <p>                    در صورتی که میخواهید به یک برگه یا پست لینک ایجاد کند میتوانید                    <a href="https://mr2app.com/blog/wp-page-link" target="_blank">                        این آموزش                    </a>                    را مطالعه کنید                </p>            </td>        </tr>        <tr valign="top" class="el_type" id="el_post" style="display: none">            <th scope="row" class="titledesc">                <label > پست </label>            </th>            <td class="forminp">                <select name="post"  id="value_post_notif"  style="width: 500px;" class="js-data-example-ajax"></select>            </td>        </tr>        <tr valign="top" class="el_type" id="el_post_cats" style="display: none">            <th scope="row" class="titledesc">                <label > دسته بندی پست </label>            </th>            <td class="forminp">                <select class="form-control" name="post_cat" id="post_cat">                    <?php                    foreach ($post_cats as $cat) {                        ?>                        <option style="text-align:right;" value="<?= $cat->term_id; ?>"><?= $cat->name; ?></option>                        <?php                    }                    ?>                </select>            </td>        </tr>        <tr  >            <th scope="row" class="titledesc">                <label dir="rtl">    عکس </label>                <p style="color: red">                    ابعاد مثلا 750 در 250                    <br>                    یا 900 در 300                </p>            </th>            <td class="forminp">                <input type="hidden" id="txt_url_item_hami" name="src_val">                <img id="div_image_item_hami" class="banner" style="cursor: pointer;width: 450px;height: 150px" src="http://placehold.it/750x250&text=3x1">            </td>        </tr>        <tr >            <th scope="row" class="titledesc">            </th>            <td class="forminp">                <input type="submit"  value="اضافه"  name="submit_banner">            </td>        </tbody>    </table></form><?phpwp_enqueue_media();wp_enqueue_script( 'loadajax.js' , WOO2APP_JS_URL.'loadAjaxPosts.js', array('jquery'));?><script>    //    jQuery(function () {    //        jQuery("#value_post_items_menu1").select2();    //    });    jQuery('#select_action_banner').on('change', function() {        var type_val = (jQuery('#select_action_banner').val());        //alert(type_val)        jQuery('.el_type').css('display','none');        if(type_val == 1){            jQuery('#el_products').css('display','table-row');        }        else if(type_val == 2){            jQuery('#el_cats').css('display','table-row');        }        else if(type_val == 3){            jQuery('#el_link').css('display','table-row');        }        else if(type_val == 4){            jQuery('#el_post').css('display','table-row');        }        else if(type_val == 5){            jQuery('#el_post_cats').css('display','table-row');        }    });    var custom_uploader_hami;    jQuery('#div_image_item_hami').click(function (e) {        e.preventDefault();        custom_uploader_hami = wp.media.frames.custom_uploader_hami = wp.media({            title: 'انتخاب تصویر',            library: {type: 'image'},            button: {text: 'انتخاب'},            multiple: false        });        custom_uploader_hami.on('select', function() {            attachment = custom_uploader_hami.state().get('selection').first().toJSON();            jQuery('#txt_url_item_hami').val(attachment.url);            url_image = attachment.url;            jQuery('#div_image_item_hami').attr("src",url_image);        });        custom_uploader_hami.open();    })    jQuery('#search_product_banner1').keyup(function(){        // alert(11)        var  v = jQuery(this).val();        if(v.length >= 3){            jQuery("#img_load").attr("style",'display:block');            jQuery.ajax({                url: ajaxurl,                data: {                    action: "load_all_product",                    search_product : v                },                success:function(data) {                    jQuery("#img_load").attr("style",'display:none');                    jQuery("#value_post_items_menu1").html(data);                }            });        }    });</script>